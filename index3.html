<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI T/F ë¶„ì„ê¸° - ê²°ê³¼</title>
    <link rel="stylesheet" href="common.css">
    <style>
        body {
            background-image: url('Question_pg/Bg2.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
        /* ìµœì¢… ê²°ê³¼ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        @font-face {
            font-family: 'JejuHallasan';
            src: url('fonts/JejuHallasan.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'NanumGyuriDiary';
            src: url('fonts/ë‚˜ëˆ”ì†ê¸€ì”¨ ê·œë¦¬ì˜ ì¼ê¸°.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        .final-page {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            padding-top: 2rem;
        }

        .final-result {
            margin: 2rem 0;
        }

        .keyword-chart {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .keyword-category {
            margin-bottom: 1.5rem;
        }

        .keyword-category h4 {
            margin: 0 0 0.8rem 0;
            font-size: 1.1em;
            color: #2c3e50;
        }

        .keyword-bar-container {
            display: flex;
            align-items: center;
            margin-bottom: 0.6rem;
            padding: 0.4rem 0;
        }

        .keyword-label {
            width: 100px;
            font-size: 0.9em;
            color: #555;
            text-align: right;
            margin-right: 1rem;
            flex-shrink: 0;
        }

        .keyword-bar-bg {
            flex: 1;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        .keyword-bar {
            height: 100%;
            border-radius: 10px;
            position: relative;
            transition: width 0.8s ease;
        }

        .keyword-bar.t-type {
            background: linear-gradient(90deg, #ff6b6b, #ff8e53);
        }

        .keyword-bar.f-type {
            background: linear-gradient(90deg, #4ecdc4, #44a08d);
        }

        .keyword-count {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8em;
            color: white;
            font-weight: bold;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        .tts-button {
            padding: 0.8rem 1.5rem;
            background-color: #9C27B0;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 1rem;
            transition: all 0.3s ease;
        }

        .tts-button:hover {
            background-color: #7B1FA2;
            transform: scale(1.05);
        }
        .result-flex-container {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: flex-start;
            width: 100%;
            max-width: 1100px;
            margin: 0 auto;
            gap: 2rem;
        }
        .final-graph-section {
            flex: 0 0 340px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            min-width: 320px;
            margin-top: 2rem;
        }
        .circle-graph-box {
            width: 260px;
            margin-bottom: 2rem;
        }
        .tf-indicator-row {
            display: flex;
            flex-direction: row;
            gap: 1.5rem;
            width: 100%;
            justify-content: flex-start;
        }
        .tf-indicator {
            flex: 1 1 0;
            text-align: center;
            padding: 1.2rem 0.5rem;
            border-radius: 20px;
            color: white;
            font-size: 1.1em;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0,0,0,0.07);
        }
        .tf-indicator.t {
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
        }
        .tf-indicator.f {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
        }
        .final-review-section {
            flex: 1 1 0;
            min-width: 320px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            margin-top: 2rem;
        }
        .review-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            width: 100%;
        }
        .review-tab-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 56px;
            padding: 0;
            flex: 1 1 0;
            min-width: 0;
            background: transparent;
            border: none;
            border-radius: 7px 7px 0 0;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.18s cubic-bezier(.4,2,.6,1), box-shadow 0.18s, background 0.2s;
        }
        .review-tab-btn.active {
            background: transparent;
            border-bottom: 2px solid #9C27B0;
            color: #9C27B0;
            transform: scale(1.12);
            box-shadow: 0 4px 16px rgba(0,0,0,0.18);
            z-index: 2;
        }
        .review-tab-btn:hover {
            background: transparent;
            transform: scale(1.12);
            box-shadow: 0 4px 16px rgba(0,0,0,0.18);
            z-index: 2;
        }
        .tab-icon {
            max-height: 90%;
            max-width: 90%;
            object-fit: contain;
            display: block;
        }
        .review-content-box {
            width: 100%;
            min-height: 220px;
            background: transparent;
            border-radius: 0 0 15px 15px;
            box-shadow: none;
            padding: 2rem 1.5rem;
            font-size: 1.1em;
            color: #333;
        }
        .result-bg-box {
            position: relative;
            width: 60vw;
            max-width: 1000px;
            aspect-ratio: 16 / 9;
            margin: 0 auto 2rem auto;
            border-radius: 30px;
            box-shadow: 0 6px 32px rgba(0,0,0,0.18);
            overflow: hidden;
        }
        .result-bg-box .bg-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
            border-radius: 30px;
        }
        .result-bg-box .result-flex-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            padding: 4vw 3vw;
            box-sizing: border-box;
            z-index: 1;
        }
        .container, .final-page {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="final-page" id="finalPage">
            <!-- <h1>ìµœì¢… ë¶„ì„ ê²°ê³¼</h1> -->
            <div id="finalOneLiner"></div>
            <div class="result-bg-box">
                <img src="Final/Black_board.png" alt="" class="bg-img">
                <div class="result-flex-container">
                    <div class="final-graph-section">
                        <div id="finalGraph"></div>
                    </div>
                    <div class="final-review-section">
                        <div class="review-tabs">
                            <button class="review-tab-btn" id="tab-comm"><img src="Final/Effective_white.png" data-hover="Final/Effective_yellow.png" alt="ì†Œí†µë²•" class="tab-icon"></button>
                            <button class="review-tab-btn" id="tab-strength"><img src="Final/Yougood_white.png" data-hover="Final/Yougood_yellow.png" alt="ê°•ì " class="tab-icon"></button>
                            <button class="review-tab-btn" id="tab-growth"><img src="Final/Improve_white.png" data-hover="Final/Improve_yellow.png" alt="ì„±ì¥" class="tab-icon"></button>
                        </div>
                        <div class="review-content-box" id="reviewContentBox"></div>
                    </div>
                </div>
            </div>
            <button onclick="location.href='index1.html'" class="start-button">ë‹¤ì‹œ ë¶„ì„í•˜ê¸°</button>
        </div>
    </div>

    <script>
        // API ê¸°ë³¸ URL ì„¤ì •
        const API_BASE_URL = 'http://localhost:8000';

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', async function() {
            const results = JSON.parse(sessionStorage.getItem('mbtiResults'));
            if (!results || !results.length) {
                alert('ë¶„ì„ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•´ì£¼ì„¸ìš”.');
                window.location.href = 'index1.html';
                return;
            }

            showFinalResult(results);
        });

        // ìµœì¢… ê²°ê³¼ í‘œì‹œ
        async function showFinalResult(results) {
            const averageScore = results.reduce((sum, r) => sum + r.score, 0) / results.length;
            const tPercentage = Math.round((100 - averageScore) / 10) * 10;
            const fPercentage = Math.round(averageScore / 10) * 10;
            
            // ê¸°ë³¸ ì •ë³´ í‘œì‹œ
            document.getElementById('finalOneLiner').innerHTML = `
                <div style="position: relative; display: inline-block; margin: 0 auto 2rem auto;">
                    <img src="Final/White_board.png" alt="ë¶„ì„ ê²°ê³¼ ì´ë¯¸ì§€" style="display: block; max-width: 100%; height: auto;">
                    <div style="
                        position: absolute;
                        top: 50%; left: 50%;
                        transform: translate(-50%, -50%);
                        width: 80%;
                        color: #333;
                        font-size: 2.2em;
                        font-weight: bold;
                        text-align: center;
                        word-break: keep-all;
                        line-height: 1.3;
                        font-family: 'JejuHallasan', sans-serif;
                        ">
                        ${getFinalOneLiner(averageScore)}
                    </div>
                </div>
            `;
            
            // ê·¸ë˜í”„ í‘œì‹œ (ì›í˜• ê·¸ë˜í”„ ìƒë‹¨, T/F ì§€í‘œ í•˜ë‹¨ ê°€ë¡œ)
            document.getElementById('finalGraph').innerHTML = `
                <div class="circle-graph-box">
                    <svg width="220" height="220">
                        <circle cx="110" cy="110" r="96" fill="none" stroke="#fff" stroke-width="7"/>
                        <circle cx="110" cy="110" r="74" fill="none" stroke="#fff" stroke-width="7"/>
                        <circle cx="110" cy="110" r="85" fill="none" stroke="#f0f0f0" stroke-width="22" transform="rotate(-90 110 110)"/>
                        <circle cx="110" cy="110" r="85" fill="none" stroke="#ff6b6b" stroke-width="22" 
                                stroke-dasharray="${(100-averageScore) * 5.34} 534" stroke-linecap="round" transform="rotate(-90 110 110)"/>
                        <circle cx="110" cy="110" r="85" fill="none" stroke="#4ecdc4" stroke-width="22" 
                                stroke-dasharray="${averageScore * 5.34} 534" 
                                stroke-dashoffset="${-(100-averageScore) * 5.34}" stroke-linecap="round" transform="rotate(-90 110 110)"/>
                        <text x="110" y="110" text-anchor="middle" dominant-baseline="middle" font-size="2.2em" font-weight="bold" stroke="#fff" stroke-width="6" paint-order="stroke" fill="#333">${averageScore.toFixed(1)}</text>
                        <text x="110" y="110" text-anchor="middle" dominant-baseline="middle" font-size="2.2em" font-weight="bold" fill="#333">${averageScore.toFixed(1)}</text>
                    </svg>
                </div>
                <div class="tf-indicator-row">
                    <div class="tf-indicator f">F-ì„±í–¥</div>
                    <div class="tf-indicator t">T-ì„±í–¥</div>
                </div>
            `;
            
            // finalReviewëŠ” íƒ­ êµ¬ì¡°ë¡œ ëŒ€ì²´í•˜ë¯€ë¡œ ì´ˆê¸°ì—ëŠ” ì•„ë¬´ ë‚´ìš©ë„ í‘œì‹œí•˜ì§€ ì•ŠìŒ
            document.getElementById('reviewContentBox').innerHTML = '';
            
            try {
                // AI ì¢…í•© ë¶„ì„ ìš”ì²­
                const response = await fetch(`${API_BASE_URL}/final_analyze`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        results: results
                    })
                });

                const finalAnalysis = await response.json();
                
                // íƒ­ë³„ ë‚´ìš© ì €ì¥
                const commText = finalAnalysis.communication_strategy.replace(/\n/g, ' ');
                const commExamples = [];
                const regex = /"([^"]+)"/g;
                let match;
                while ((match = regex.exec(commText)) !== null && commExamples.length < 3) {
                    commExamples.push('"' + match[1].trim() + '"');
                }
                while (commExamples.length < 3) commExamples.push('');
                const commLines = [
                    'F ì„±í–¥ ìƒëŒ€ì™€ì˜ íš¨ê³¼ì ì¸ ì†Œí†µë²•',
                    ...commExamples
                ].slice(0, 4).join('<br>');
                window.finalReviewTabs = {
                    comm: `<div style='line-height:1.7; font-size:1.25em; color:#fff; font-weight:bold; white-space:pre-line; font-family: "NanumGyuriDiary", sans-serif;'>${commLines}</div>`,
                    strength: `<div style='display:flex; flex-wrap:wrap; justify-content:center; text-align:center; gap:0.5rem; margin-top:0.5rem; font-family: "NanumGyuriDiary", sans-serif; font-size:1.25em;'>
                        ${finalAnalysis.strengths.map(strength => `<span style='display:inline-block; background:linear-gradient(90deg,#ffe066,#ffd700); color:#333; font-weight:bold; border-radius:20px; padding:0.4em 1em; font-size:1em; box-shadow:0 2px 8px rgba(255,224,102,0.15); margin-bottom:0.2em;'>#${strength.replace(/\s+/g, '')}</span>`).join('')}
                    </div>
                    <button class="tts-button" onclick="playTTS('ë‹¹ì‹ ì˜ ê°•ì ì€ ${finalAnalysis.strengths.join(", ")} ì…ë‹ˆë‹¤.')" style="margin-top:1rem; font-family: "NanumGyuriDiary", sans-serif;">ğŸ”Š ë“£ê¸°</button>`,
                    growth: `<ul style='margin:0; padding-left:1.2rem; font-family: "NanumGyuriDiary", sans-serif; font-size:1.25em; color:#fff; font-weight:bold;'>
                        ${finalAnalysis.growth_areas.map(area => `<li style='margin-bottom:0.5rem; line-height:1.5;'>${area}</li>`).join('')}
                    </ul>
                    <button class="tts-button" onclick="playTTS('ì„±ì¥ í¬ì¸íŠ¸ëŠ” ${finalAnalysis.growth_areas.join(", ")} ì…ë‹ˆë‹¤.')" style="margin-top:1rem; font-family: "NanumGyuriDiary", sans-serif;">ğŸ”Š ë“£ê¸°</button>`
                };
                // íƒ­ ì´ë²¤íŠ¸ ë°”ì¸ë”©
                const tabBtns = [
                    {id: 'tab-comm', key: 'comm'},
                    {id: 'tab-strength', key: 'strength'},
                    {id: 'tab-growth', key: 'growth'}
                ];
                tabBtns.forEach(({id, key}) => {
                    const btn = document.getElementById(id);
                    btn.onclick = function() {
                        tabBtns.forEach(({id:otherId}) => document.getElementById(otherId).classList.remove('active'));
                        btn.classList.add('active');
                        document.getElementById('reviewContentBox').innerHTML = window.finalReviewTabs[key];
                    }
                });
                // ì´ˆê¸°ì—ëŠ” ì•„ë¬´ íƒ­ë„ ì„ íƒí•˜ì§€ ì•ŠìŒ
                document.getElementById('reviewContentBox').innerHTML = '';
                
            } catch (error) {
                console.error('Error fetching final analysis:', error);
                document.getElementById('reviewContentBox').innerHTML = `<div style='background: #f8d7da; padding: 2rem; border-radius: 15px; border-left: 5px solid #dc3545; color: #721c24;'><h3 style='margin-top:0;'>âš ï¸ ë¶„ì„ ì˜¤ë¥˜</h3><p>ì¢…í•© ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ê¸°ë³¸ ë¶„ì„ ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.</p><div style='margin-top:1rem;'>${getFinalReview(averageScore)}</div></div>`;
            }
        }

        // ìµœì¢… í•œ ì¤„ í‰ê°€ ìƒì„±
        function getFinalOneLiner(score) {
            if (score < 20) return "ëƒ‰ì² í•œ ë…¼ë¦¬ ë¨¸ì‹ ! ê°ì •? ê·¸ê²Œ ë­”ê°€ìš”?";
            if (score <= 40) return "íŒ©íŠ¸ í­ê²©ê¸°! ë°ì´í„°ê°€ ê³§ ì§„ë¦¬ì£ ?";
            if (score >= 41 && score <= 59) return "ë…¼ë¦¬ì™€ ê°ì •ì˜ ì¤„íƒ€ê¸° ë‹¬ì¸! ì–‘ë‹¤ë¦¬ ê³ ìˆ˜ë„¤ìš”~";
            if (score < 80) return "ê°ì • ê³µê° ë ˆì´ë”! ëˆˆë¬¼ í•œ ë°©ìš¸ë„ ë†“ì¹˜ì§€ ì•Šì£ ?";
            return "ì™„ì „ ê°ì„±íŒ©í† ë¦¬! ë“œë¼ë§ˆ ë³´ë‹¤ê°€ í‹°ìŠˆ ëª‡ ë°•ìŠ¤ ì¨ìš”?";
        }

        // ìµœì¢… ë¦¬ë·° ìƒì„±
        function getFinalReview(score) {
            let review = "";
            if (score < 20) {
                review = `
                    <p>ë‹¹ì‹ ì€ ë§¤ìš° ë…¼ë¦¬ì ì´ê³  ê°ê´€ì ì¸ íŒë‹¨ì„ ì„ í˜¸í•©ë‹ˆë‹¤.</p>
                    <p>ê°ì •ë³´ë‹¤ëŠ” ì‚¬ì‹¤ê³¼ ë…¼ë¦¬ì— ê¸°ë°˜í•˜ì—¬ ê²°ì •ì„ ë‚´ë¦¬ëŠ” ê²½í–¥ì´ ê°•í•©ë‹ˆë‹¤.</p>
                    <p>ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ë©°, íš¨ìœ¨ì ì¸ ì˜ì‚¬ê²°ì •ì„ ì˜ í•˜ì‹¤ ê²ƒ ê°™ë„¤ìš”.</p>
                `;
            } else if (score < 40) {
                review = `
                    <p>ë…¼ë¦¬ì  ì‚¬ê³ ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•˜ë˜, ê°ì •ì  ìš”ì†Œë„ ê³ ë ¤í•˜ì‹œëŠ” í¸ì…ë‹ˆë‹¤.</p>
                    <p>ê°ê´€ì  íŒë‹¨ì„ ì¤‘ì‹œí•˜ì§€ë§Œ, ìƒí™©ì— ë”°ë¼ ìœ ì—°í•œ ëŒ€ì²˜ë„ ê°€ëŠ¥í•˜ì‹­ë‹ˆë‹¤.</p>
                    <p>ê· í˜• ì¡íŒ ì‚¬ê³ ë°©ì‹ì„ ê°€ì§€ê³  ìˆìœ¼ë‚˜, T ì„±í–¥ì´ ì¡°ê¸ˆ ë” ê°•í•©ë‹ˆë‹¤.</p>
                `;
            } else if (score < 60) {
                review = `
                    <p>ë…¼ë¦¬ì™€ ê°ì • ì‚¬ì´ì—ì„œ í›Œë¥­í•œ ê· í˜•ì„ ì´ë£¨ê³  ê³„ì‹­ë‹ˆë‹¤.</p>
                    <p>ìƒí™©ì— ë”°ë¼ ê°ê´€ì  íŒë‹¨ê³¼ ê°ì •ì  ê³µê°ì„ ì ì ˆíˆ ì‚¬ìš©í•˜ì‹œëŠ” ê²ƒ ê°™ë„¤ìš”.</p>
                    <p>ë‹¤ì–‘í•œ ê´€ì ì—ì„œ ë¬¸ì œë¥¼ ë°”ë¼ë³¼ ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤.</p>
                `;
            } else if (score < 80) {
                review = `
                    <p>ê°ì •ì  ê³µê° ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ë©°, ë‹¤ë¥¸ ì‚¬ëŒì˜ ê°ì •ì„ ì˜ ì´í•´í•˜ì‹­ë‹ˆë‹¤.</p>
                    <p>ë…¼ë¦¬ì  íŒë‹¨ë„ ê°€ëŠ¥í•˜ì§€ë§Œ, ê°ì •ì  ìš”ì†Œë¥¼ ë” ì¤‘ìš”í•˜ê²Œ ê³ ë ¤í•˜ì‹œëŠ” í¸ì…ë‹ˆë‹¤.</p>
                    <p>ì¸ê°„ê´€ê³„ì—ì„œ ë›°ì–´ë‚œ ëŠ¥ë ¥ì„ ë°œíœ˜í•˜ì‹¤ ê²ƒ ê°™ë„¤ìš”.</p>
                `;
            } else {
                review = `
                    <p>ë§¤ìš° ë›°ì–´ë‚œ ê°ì •ì  ê³µê° ëŠ¥ë ¥ì„ ê°€ì§€ê³  ê³„ì‹­ë‹ˆë‹¤.</p>
                    <p>ë‹¤ë¥¸ ì‚¬ëŒì˜ ê°ì •ì„ ê¹Šì´ ì´í•´í•˜ê³  ë°°ë ¤í•˜ëŠ” ì„±í–¥ì´ ë§¤ìš° ê°•í•©ë‹ˆë‹¤.</p>
                    <p>ì¸ê°„ê´€ê³„ì—ì„œ íƒì›”í•œ ëŠ¥ë ¥ì„ ë³´ì—¬ì£¼ì‹¤ ê²ƒ ê°™ë„¤ìš”.</p>
                `;
            }
            return review;
        }

        // TTS ê¸°ëŠ¥
        async function playTTS(text) {
            try {
                const response = await fetch(`${API_BASE_URL}/tts?text=${encodeURIComponent(text)}`, {
                    method: 'POST'
                });

                if (!response.ok) throw new Error('TTS ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');

                const blob = await response.blob();
                const audio = new Audio(URL.createObjectURL(blob));
                audio.play();
            } catch (error) {
                console.error('TTS Error:', error);
                alert('ìŒì„± ì¬ìƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }
    </script>
    <script>
        // íƒ­ ë²„íŠ¼ ì´ë¯¸ì§€ hover/active ì‹œ ì´ë¯¸ì§€ ë³€ê²½ ë° active ê´€ë¦¬
        document.addEventListener('DOMContentLoaded', function() {
            const tabBtns = document.querySelectorAll('.review-tab-btn');
            tabBtns.forEach(btn => {
                const img = btn.querySelector('img');
                if (!img) return;
                const orig = img.getAttribute('src');
                const hover = img.getAttribute('data-hover');
                if (!hover) return;

                // Hover íš¨ê³¼
                btn.addEventListener('mouseenter', () => {
                    img.src = hover;
                });
                btn.addEventListener('mouseleave', () => {
                    if (!btn.classList.contains('active')) img.src = orig;
                });

                // í´ë¦­ ì‹œ active ê´€ë¦¬ ë° ì´ë¯¸ì§€ ë³€ê²½
                btn.addEventListener('click', () => {
                    tabBtns.forEach(b => {
                        b.classList.remove('active');
                        const i = b.querySelector('img');
                        if (i) i.src = i.getAttribute('src');
                    });
                    btn.classList.add('active');
                    img.src = hover;
                });
            });

            // ìµœì´ˆ í™œì„±í™” íƒ­ ì´ë¯¸ì§€ë„ hoverë¡œ
            const activeBtn = document.querySelector('.review-tab-btn.active');
            if (activeBtn) {
                const img = activeBtn.querySelector('img');
                const hover = img && img.getAttribute('data-hover');
                if (img && hover) img.src = hover;
            }
        });
        </script>
</body>
</html> 